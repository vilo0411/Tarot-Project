"use strict";(self.webpackChunktarot_project=self.webpackChunktarot_project||[]).push([[1519],{9593:(e,n,a)=>{a.r(n),a.d(n,{default:()=>h});var t=a(6540),r=a(1410);const s={container:"container_U4yt",title:"title_gqir",questionInput:"questionInput_b0c5",cardLayout:"cardLayout_V2CZ",cardContainer:"cardContainer_ayd4",selectedCardContainer:"selectedCardContainer_oqnQ",card:"card_fGcn",cardImage:"cardImage_uBgo",selectedCardDisplay:"selectedCardDisplay_NNi8",resultCard:"resultCard_qkmJ",resultCardImage:"resultCardImage_XuE7",cardInfo:"cardInfo_A6PF",reversedCard:"reversedCard_LNKe",reversedLabel:"reversedLabel_rT5c",startButton:"startButton_lvq9",resetButton:"resetButton_SJdO",markdownContainer:"markdownContainer_DsSO",analysisSection:"analysisSection_lFgm",loadingContainer:"loadingContainer_FFOk",spinner:"spinner_bmhW",spin:"spin_mYy0",apiErrorContainer:"apiErrorContainer_RbtG",cardSection:"cardSection_Gbgx",cardTitle:"cardTitle_LsgN",cardPosition:"cardPosition__e9X",cardUpright:"cardUpright_Si4r",cardReversed:"cardReversed_BL0f",cardMeaning:"cardMeaning_HlYm",keypoints:"keypoints_ycSp"};var c=a(4848);const i=function(e){let{card:n,isBack:a=!0,isSelected:t=!1,isReversed:r=!1,onClick:i}=e;return(0,c.jsx)("div",{className:`${s.cardContainer} ${t?s.selectedCardContainer:""}`,onClick:i,children:(0,c.jsxs)("div",{className:`${s.card} ${r&&!a?s.reversedCard:""}`,children:[(0,c.jsx)("img",{src:((e,n)=>{try{return n?"img/deck/back.jpg":`img/deck/${e.code}.jpg`}catch(a){return console.error("Error in getCardImage:",a),"img/deck/back.jpg"}})(n,a),alt:a?"Card Back":n?.name||"Tarot Card",className:s.cardImage,style:{transform:r&&!a?"rotate(180deg)":"none"}}),!a&&(0,c.jsxs)("div",{className:s.cardInfo,children:[(0,c.jsx)("p",{children:n?.name||"Unknown Card"}),r&&(0,c.jsx)("span",{className:s.reversedLabel,children:"(Reversed)"})]})]})})};const d=function(e){let{shuffledCards:n=[],selectedCards:a=[],onCardSelect:t}=e;const r=Array.isArray(n)?n:[],d=e=>!(!e||!Array.isArray(a))&&a.some((n=>n.code===e.code));return(0,c.jsx)("div",{className:s.cardLayout,children:r.map(((e,n)=>e&&e.code?(0,c.jsx)(i,{card:e,isBack:!0,isSelected:d(e),isReversed:!1,onClick:()=>t(e)},e.code||n):null))})};const o=function(e){let{selectedCards:n=[],onReset:a}=e;const t=Array.isArray(n)?n:[];return(0,c.jsxs)("div",{className:s.readingResult,children:[(0,c.jsx)("div",{className:s.selectedCardDisplay,children:t.map(((e,n)=>e&&e.code?(0,c.jsx)(i,{card:e,isBack:!1,isReversed:e.isReversed},e.code||n):null))}),(0,c.jsx)("button",{className:s.resetButton,onClick:a,children:"New Reading"})]})};var l=a(7331);const h=function(){const e=()=>[{name:"The Fool",code:"m00"},{name:"The Magician",code:"m01"},{name:"The High Priestess",code:"m02"},{name:"The Empress",code:"m03"},{name:"The Emperor",code:"m04"},{name:"The Hierophant",code:"m05"},{name:"The Lovers",code:"m06"},{name:"The Chariot",code:"m07"},{name:"Strength",code:"m08"},{name:"The Hermit",code:"m09"},{name:"Wheel of Fortune",code:"m10"},{name:"Justice",code:"m11"},{name:"The Hanged Man",code:"m12"},{name:"Death",code:"m13"},{name:"Temperance",code:"m14"},{name:"The Devil",code:"m15"},{name:"The Tower",code:"m16"},{name:"The Star",code:"m17"},{name:"The Moon",code:"m18"},{name:"The Sun",code:"m19"},{name:"Judgement",code:"m20"},{name:"The World",code:"m21"},...["Cups","Wands","Swords","Pentacles"].flatMap((e=>["Ace","2","3","4","5","6","7","8","9","10","Page","Knight","Queen","King"].map(((n,a)=>({name:`${n} of ${e}`,code:`${e.charAt(0).toLowerCase()}${String(a+1).padStart(2,"0")}`})))))],[n,a]=(0,t.useState)(""),[i,h]=(0,t.useState)([]),[m,u]=(0,t.useState)(!1),[g,p]=(0,t.useState)([]),[C,v]=(0,t.useState)(null),[j,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),T="AIzaSyDo_UPahCaXZIdtGGVDMJy6QrPhLh2gE44";return(0,t.useEffect)((()=>{const n=e().map((e=>({...e,isReversed:Math.random()>.5}))).sort((()=>Math.random()-.5));p(n)}),[]),(0,c.jsx)(r.A,{title:"B\xf3i B\xe0i Tarot",description:"Tr\u1ea3i B\xe0i Tarot Tr\u1ef1c Tuy\u1ebfn",children:(0,c.jsxs)("div",{className:s.container,children:[(0,c.jsx)("h1",{className:s.title,children:"H\xe3y Th\u1edf S\xe2u, Xua \u0110i M\u1ecdi Suy Ngh\u0129, B\u1eaft \u0110\u1ea7u Cu\u1ed9c H\xe0nh Tr\xecnh Tarot"}),(0,c.jsx)("textarea",{className:s.questionInput,placeholder:"C\xe2u h\u1ecfi b\xf3i c\u1ee7a b\u1ea1n (B\u1eaft Bu\u1ed9c)",value:n,onChange:e=>{a(e.target.value)},disabled:m||y}),m||y?y?(0,c.jsxs)("div",{className:s.loadingContainer,children:[(0,c.jsx)("div",{className:s.spinner}),(0,c.jsx)("p",{children:"\u0110ang ph\xe2n t\xedch b\xf3i b\xe0i c\u1ee7a b\u1ea1n..."})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{selectedCards:i,onReset:()=>{a(""),h([]),u(!1),x(null),v(null);const n=e().map((e=>({...e,isReversed:Math.random()>.5}))).sort((()=>Math.random()-.5));p(n)}}),y?(0,c.jsxs)("div",{className:s.loadingContainer,children:[(0,c.jsx)("div",{className:s.spinner}),(0,c.jsx)("p",{children:"\u0110ang ph\xe2n t\xedch b\xf3i b\xe0i c\u1ee7a b\u1ea1n..."})]}):C?(0,c.jsxs)("div",{className:s.apiErrorContainer,children:[(0,c.jsx)("h3",{children:"L\u1ed7i"}),(0,c.jsx)("p",{children:C.message})]}):(0,c.jsx)("div",{className:s.analysisResults,children:j&&(0,c.jsxs)("div",{className:s.analysisSection,children:[(0,c.jsx)("h3",{children:"K\u1ebft Qu\u1ea3 B\xf3i B\xe0i"}),(0,c.jsx)("div",{className:s.markdownContainer,children:(0,c.jsx)(l.oz,{children:j.text})})]})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{children:"Ch\u1ecdn 3 L\xe1 B\xe0i (B\u1eaft Bu\u1ed9c)"}),(0,c.jsx)(d,{shuffledCards:g||[],selectedCards:i,onCardSelect:e=>{if(!e||!g||0===g.length)return;if(i.some((n=>n.code===e.code)))h(i.filter((n=>n.code!==e.code)));else if(i.length<3){const n=g.find((n=>n.code===e.code));n&&h([...i,n])}}}),(0,c.jsx)("button",{className:s.startButton,onClick:async()=>{if(n.trim()&&3===i.length){b(!0);try{await(async(e,n)=>{try{v(null);const a=`B\u1ea1n l\xe0 1 Tarot Reader chuy\xean nghi\u1ec7p. Ng\u01b0\u1eddi d\xf9ng s\u1ebd nh\u1eadp c\xe2u h\u1ecfi v\xe0 r\xfat b\xe0i. Ph\u01b0\u01a1ng ph\xe1p tr\u1ea3i b\xe0i s\u1ebd l\xe0 ph\u01b0\u01a1ng ph\xe1p 3 l\xe1. Gi\u1ea3i ngh\u0129a b\xf3i b\xe0i tarot b\u1eb1ng ti\u1ebfng Vi\u1ec7t. \n        C\xe2u h\u1ecfi l\xe0: ${e}. \n        C\xe1c l\xe1 b\xe0i \u0111\u01b0\u1ee3c ch\u1ecdn l\u1ea7n l\u01b0\u1ee3t l\xe0: ${n.map((e=>`${e.name}${e.isReversed?" (Ng\u01b0\u1ee3c)":" (Thu\u1eadn)"}`)).join(", ")}. \n        Cung c\u1ea5p m\u1ed9t gi\u1ea3i th\xedch chi ti\u1ebft v\u1ec1 \xfd ngh\u0129a t\u1eebng l\xe1 b\xe0i v\xe0 m\u1ed1i quan h\u1ec7 gi\u1eefa ch\xfang, \n        c\xf3 t\xednh \u0111\u1ebfn v\u1ecb tr\xed thu\u1eadn/ng\u01b0\u1ee3c c\u1ee7a t\u1eebng l\xe1. \n        K\u1ebft lu\u1eadn v\u1edbi l\u1eddi khuy\xean v\xe0 h\u01b0\u1edbng d\u1eabn c\u1ee5 th\u1ec3 cho ng\u01b0\u1eddi \u0111\u1eb7t c\xe2u h\u1ecfi.`,t=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${T}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}]})});if(!t.ok){const e=await t.text();throw new Error(`API responded with status ${t.status}: ${e}`)}const r=await t.json(),s=r.candidates[0]?.content?.parts[0]?.text||"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 b\xf3i b\xe0i",c={text:s,sentiment:{score:s.includes(["t\xedch c\u1ef1c","hy v\u1ecdng","l\u1ea1c quan"])?1:s.includes(["ti\xeau c\u1ef1c","th\xe1ch th\u1ee9c","kh\xf3 kh\u0103n"])?-1:0,magnitude:s.length}};return x(c),c}catch(a){return console.error("Gemini API Error:",a),v({message:a.message,status:"API Request Error"}),null}})(n,i),u(!0)}catch(e){console.error("Reading analysis error:",e),v({message:"L\u1ed7i trong qu\xe1 tr\xecnh ph\xe2n t\xedch"})}finally{b(!1)}}},disabled:!n.trim()||3!==i.length,children:"B\u1eaft \u0110\u1ea7u B\xf3i"})]})]})})}}}]);